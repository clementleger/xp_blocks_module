map:
  window_spray:
    type: spray
    name: Window spray
    inverted: true
    id: 0
  pumpkin_light:
    type: light
    name: Pumpkin light
    id: 3
  window_ghost:
    type: light
    name: Window Ghost
    id: 4
  entrance_light:
    type: light
    name: Entrance Light
    id: 5

presets:
  - glow_fast: &glow_fast
      type: fade
  - candle_flicker: &candle_flicker
      type: candle_flicker
      flicker_duration: 5
  - lightning: &lightning
      type: lightning
      speed: 10
  - static: &static
      type: static
      power: 255
  - flicker_pumpkin: &flicker_pumpkin
      type: flicker
      flicker_period: 100
      # off_threshold: 20
  - flicker: &flicker
      type: flicker
      flicker_period: 200
  - lightning: &lightning
      type: flicker
      on_off: true
      flicker_period: 20

scenario:
  name: Small tower
  steps:
    - duration: 2
      name: Spray
      channels:
        - window_spray:
            <<: *static
        - pumpkin_light:
            <<: *flicker_pumpkin 
    - duration: 5
      name: Candle flicker
      channels:
        - pumpkin_light:
            <<: *flicker_pumpkin
    - duration: 2
      name: Lightning strike
      channels:
        - entrance_light:
            <<: *lightning
        - pumpkin_light:
            <<: *flicker_pumpkin 
    - duration: 2
      name: Lightning strike + spray
      channels:
        - window_spray:
            <<: *static
        - entrance_light:
            <<: *lightning
        - pumpkin_light:
            <<: *flicker_pumpkin 
    - duration: 7
      name: Normal night
      channels:
        - entrance_light:
            <<: *static
        - window_ghost:
            <<: *flicker
        - pumpkin_light:
            <<: *flicker_pumpkin

      